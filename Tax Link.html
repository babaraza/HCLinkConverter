<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
</head>
<body><h1>HCTAX Link Converter</h1>

<script>
var encrypted_number, url;
var final_links = [];

function get_links() 
{
    // Create Array from Text Area Input by separating values by comma
    var array_from_textArea = document.getElementById("account_input").value.split(',');
    document.getElementById("number_of_items").innerHTML += array_from_textArea.length;
    // Iterate overeach item in array from Texas Area Input
    array_from_textArea.forEach(encrypt_and_go);
}

function encrypt_and_go(account) 
{
    var request = new XMLHttpRequest();
        request.onreadystatechange = function()
        {
            if (this.readyState == 4 && this.status == 200) 
            {
                encrypted_number = this.responseText;
                url = "http://www.hctax.net/Property/TaxStatement?account=" + encrypted_number;
                final_links.push(account+": "+url);
                document.getElementById("results").innerHTML = final_links.join("<br>");
            }
        }
        request.open('GET', 'http://www.hctax.net/Property/AccountEncrypt?account=' + account);
        request.send();
}

</script>    
Enter Account Numbers:<br><br>
<textarea id="account_input"></textarea><br><br>
<button onclick="get_links()">Get Links</button>
<br><br>
<p style="color:black;" id="number_of_items">Number of items: </p>
Results:<br>
<p style="color:black;" id="results"></p>


</body>
</html>